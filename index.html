<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.4.4/math.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <style>
        .calculator-input {
            font-family: monospace;
            letter-spacing: 1px;
        }
        
        .person-card {
            transition: all 0.3s ease;
        }
        
        .person-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            transition: all 0.2s ease;
        }

        .btn-primary:active {
            transform: scale(0.98);
        }

        .results-card {
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .delete-btn {
            transition: all 0.2s ease;
        }

        .delete-btn:hover {
            background-color: #EF4444;
            transform: rotate(5deg);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen p-4 md:p-8">
    <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-6">
        <h1 class="text-3xl font-bold mb-8 text-center text-gray-800">
            üí∞ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô
        </h1>

        <div class="mb-6 space-y-4" id="peopleInputs">
            <!-- ‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
        </div>

        <button onclick="addPerson()" class="btn-primary mb-8 w-full bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 flex items-center justify-center space-x-2">
            <span class="text-xl">+</span>
            <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ô</span>
        </button>

        <div class="mb-8">
            <label class="block mb-2 font-medium text-gray-700">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</label>
            <input type="text" 
                   id="totalExpense" 
                   inputmode="numeric"
                   class="calculator-input w-full p-4 border rounded-lg text-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                   placeholder="‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô 890+890)"
                   onkeyup="handleCalculator(this)">
            <p id="calculationResult" class="mt-2 text-gray-500 text-sm"></p>
        </div>

        <button onclick="calculate()" class="btn-primary w-full bg-green-500 text-white px-6 py-4 rounded-lg hover:bg-green-600 mb-8 font-medium text-lg">
            ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
        </button>

        <div id="results" class="space-y-4"></div>
    </div>

    <script>
        let people = [];

        function addPerson() {
            const personDiv = document.createElement('div');
            personDiv.className = 'person-card bg-gray-50 p-4 rounded-lg';
            personDiv.innerHTML = `
                <div class="flex gap-4">
                    <input type="text" class="person-name w-1/2 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                           placeholder="‡∏ä‡∏∑‡πà‡∏≠">
                    <input type="number" class="person-amount w-1/2 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                           placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"
                           inputmode="numeric">
                    <button onclick="this.parentElement.parentElement.remove()" 
                            class="delete-btn bg-red-400 text-white px-4 rounded-lg hover:bg-red-500">
                        √ó
                    </button>
                </div>
            `;
            document.getElementById('peopleInputs').appendChild(personDiv);
        }

        function handleCalculator(input) {
            try {
                const expression = input.value.replace(/[^0-9+\-*/().]/g, '');
                if (expression) {
                    const result = math.evaluate(expression);
                    document.getElementById('calculationResult').textContent = 
                        `= ${result.toFixed(2)} ‡∏ö‡∏≤‡∏ó`;
                    input.dataset.calculatedValue = result;
                } else {
                    document.getElementById('calculationResult').textContent = '';
                    input.dataset.calculatedValue = '';
                }
            } catch (e) {
                document.getElementById('calculationResult').textContent = 
                    '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...';
                input.dataset.calculatedValue = '';
            }
        }

        function calculate() {
            const nameInputs = document.getElementsByClassName('person-name');
            const amountInputs = document.getElementsByClassName('person-amount');
            const totalExpenseInput = document.getElementById('totalExpense');
            const totalExpense = parseFloat(totalExpenseInput.dataset.calculatedValue || totalExpenseInput.value);

            people = [];
            let totalContributed = 0;

            for (let i = 0; i < nameInputs.length; i++) {
                const name = nameInputs[i].value.trim();
                const amount = parseFloat(amountInputs[i].value) || 0;
                if (name) {
                    people.push({ name, amount });
                    totalContributed += amount;
                }
            }

            if (people.length === 0 || isNaN(totalExpense)) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }

            const perPerson = totalExpense / people.length;
            let resultsHTML = `
                <div class="results-card bg-gray-50 p-6 rounded-lg shadow-sm">
                    <h2 class="text-xl font-bold mb-4 text-gray-800">‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</h2>
                    <div class="space-y-2 mb-6">
                        <p class="text-gray-600">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span class="font-medium text-gray-800">${people.length} ‡∏Ñ‡∏ô</span></p>
                        <p class="text-gray-600">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span class="font-medium text-gray-800">${totalExpense.toFixed(2)} ‡∏ö‡∏≤‡∏ó</span></p>
                        <p class="text-gray-600">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Ñ‡∏ô: <span class="font-medium text-gray-800">${perPerson.toFixed(2)} ‡∏ö‡∏≤‡∏ó</span></p>
                    </div>
                    <h3 class="font-bold mb-3 text-gray-800">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</h3>
                    <ul class="space-y-3">
            `;

            people.forEach(person => {
                const difference = perPerson - person.amount;
                let status, statusClass;
                
                if (difference > 0) {
                    status = `‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏° ${difference.toFixed(2)} ‡∏ö‡∏≤‡∏ó`;
                    statusClass = 'text-red-600';
                } else if (difference < 0) {
                    status = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏∑‡∏ô ${(-difference).toFixed(2)} ‡∏ö‡∏≤‡∏ó`;
                    statusClass = 'text-green-600';
                } else {
                    status = '‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô';
                    statusClass = 'text-gray-600';
                }
                
                resultsHTML += `
                    <li class="p-3 bg-white rounded-lg shadow-sm">
                        <span class="font-medium">${person.name}</span>
                        <div class="text-sm text-gray-600">‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ${person.amount} ‡∏ö‡∏≤‡∏ó</div>
                        <div class="font-medium ${statusClass}">${status}</div>
                    </li>`;
            });

            resultsHTML += '</ul></div>';
            document.getElementById('results').innerHTML = resultsHTML;
        }

        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
        addPerson();
    </script>
</body>
</html>